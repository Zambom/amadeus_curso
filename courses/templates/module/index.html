{% extends 'app/base.html' %}

{% load static %}

{% block breadcrumbs %}
	<ol class="breadcrumb">
	  	<li><a href="{% url 'app:index' %}">Página Inicial</a></li>
	  	<li><a href="{% url 'app:course:view' course.slug %}">{{ course }}</a></li>
	  	<li class="active">Gerenciar Módulos</li>
	</ol>
{% endblock %}

{% block sidebar %}
	<div class="list-group">
	  	<a href="{% url 'app:course:manage' %}" class="list-group-item">
	    	Cursos
	  	</a>
	  	<a href="{% url 'app:course:create' %}" class="list-group-item">
	    	Criar Curso
	  	</a>
	  	<a href="{% url 'app:course:view' course.slug %}" class="list-group-item">
	    	Dados do Cursos
	  	</a>
	  	<a href="{% url 'app:course:update' course.slug %}" class="list-group-item">
	    	Editar Curso
	  	</a>
	  	<a href="{% url 'app:course:manage_mods' course.slug %}" class="list-group-item active">
	    	Visualizar Módulos
	  	</a>
	  	<a href="" class="list-group-item">
	    	Participantes
	  	</a>
		<a href="" class="list-group-item">
	    	Avaliações do Curso
	  	</a>
		<a href="" class="list-group-item">
	    	Replicar Curso
	  	</a>
	  	<a href="" class="list-group-item">
	    	Deletar Curso
	  	</a>
	</div>

{% endblock %}

{% block content %}
	{% if messages %}
		{% for message in messages %}
			<div class="alert alert-success alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<p>{{ message }}</p>
			</div>
		{% endfor %}
	{% endif %}

	<div class="row well well-inverse">
  		<div class="col-md-2">
  			<img src="{{ course.image.url }}" class="img-responsive" />
			</div>
  		<div class="col-md-10">
			<div class="row">
	  			<div class="col-md-12">
					<div class="pull-right">
						<a href="{% url 'app:course:create_mods' course.slug %}" class="btn btn-sm btn-success">
							Criar Módulo
						</a>
					</div>
					<h4>
						<a href="{% url 'app:course:view' course.slug %}">
							{{ course }}
						</a>
					</h4>
					<span class="label label-info">{{ course.category }}</span>
					<span class="label label-warning">{{ course.max_students }} alunos no máximo</span>
	  			</div>
	  			<div class="col-md-12">
					<strong>Período: </strong> <em>de</em> <u>{{ course.init_date }}</u> <em>até</em> <u>{{ course.end_date }}</u>
	  			</div>
			</div>
  		</div>
	</div>

	{% if modules|length > 0 %}
		<div class="panel panel-default">
  			<div class="panel-heading">
    			<h3 class="panel-title">Módulos</h3>
  			</div>
			<div class="panel-body">
				<ul class="list-group">
    				{% for module in modules %}
						<li class="list-group-item">
							<div class="media">
								<div class="col-sm-10">
									<div class="media-body">
										<h4 class="media-heading">{{ module }}</h4>
										<p>{{ module.description|linebreaks }}</p>
									</div>
								</div>
								<div class="col-sm-2" style="padding-top: 10px">
									{% if module.visible %}
				        				<span class="label label-success">Visível</span>
				        			{% else %}
				        				<span class="label label-danger">Invisível</span>
				        			{% endif %}
				        			<a href="{% url 'app:course:update_mods' module.slug course.slug %}" class="btn btn-sm btn-primary" style="margin-top: 10px">
										<span class="glyphicon glyphicon-edit"></span>
									</a>
									<a href="" class="btn btn-sm btn-danger" style="margin-top: 10px">
										<span class="glyphicon glyphicon-trash"></span>
									</a>
				        		</div>
							</div>
			    		</li>
					{% endfor %}
				</ul>
			</div>
		</div>
	{% else %}
		Nenhum módulo criado até o momento
	{% endif %}

{% endblock %}